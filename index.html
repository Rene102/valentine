<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>For Ankita üíò</title>
  <meta name="description" content="A tiny surprise for Ankita." />
  <style>
    :root{
      --bg1:#ffd1dc;
      --bg2:#ffe6ef;
      --ink:#4a2c33;
      --muted:#6b3b45;
      --card:#ffffffcc;
      --shadow: 0 18px 50px rgba(0,0,0,.18);
      --btn1:#d85a7a;
      --btn2:#b94b66;
      --btnText:#fff;
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background: radial-gradient(circle at 20% 10%, #fff 0%, transparent 40%),
                  radial-gradient(circle at 80% 30%, #fff 0%, transparent 42%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
      overflow-x:hidden;
    }

    /* Subtle sparkles */
    .sparkles{
      position:fixed; inset:0; pointer-events:none; opacity:.55;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(255,255,255,.9) 0 2px, transparent 3px),
        radial-gradient(circle at 70% 30%, rgba(255,255,255,.8) 0 1.5px, transparent 3px),
        radial-gradient(circle at 40% 80%, rgba(255,255,255,.8) 0 2px, transparent 3px),
        radial-gradient(circle at 85% 75%, rgba(255,255,255,.7) 0 1.5px, transparent 3px),
        radial-gradient(circle at 25% 55%, rgba(255,255,255,.75) 0 1.5px, transparent 3px),
        radial-gradient(circle at 55% 15%, rgba(255,255,255,.75) 0 1.5px, transparent 3px);
      animation: twinkle 3.8s ease-in-out infinite;
    }
    @keyframes twinkle{
      0%,100%{filter: blur(.2px); opacity:.45}
      50%{filter: blur(0px); opacity:.75}
    }

    /* Floating hearts */
    .hearts{
      position:fixed; inset:0; pointer-events:none; overflow:hidden;
    }
    .heart{
      position:absolute;
      width:18px; height:18px;
      transform: rotate(45deg);
      background: rgba(255, 105, 135, .22);
      border-radius: 4px;
      animation: floatUp linear infinite;
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width:18px;height:18px;
      background: rgba(255, 105, 135, .22);
      border-radius:50%;
    }
    .heart:before{left:-9px; top:0}
    .heart:after{left:0; top:-9px}
    @keyframes floatUp{
      from{transform: translateY(110vh) rotate(45deg); opacity:.05}
      15%{opacity:.45}
      to{transform: translateY(-20vh) rotate(45deg); opacity:0}
    }

    .wrap{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px 16px;
      position:relative;
      z-index:2;
    }
    .card{
      width:min(720px, 100%);
      background: var(--card);
      border: 1px solid rgba(255,255,255,.7);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 28px 18px;
      text-align:center;
      position:relative;
    }

    .badge{
      display:inline-flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      font-weight:700;
      letter-spacing:.08em;
      text-transform:uppercase;
      color: var(--muted);
      font-size: .85rem;
      margin-bottom:10px;
    }
    .title{
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      font-weight:800;
      letter-spacing:.02em;
      font-size: clamp(28px, 4.8vw, 46px);
      margin: 6px 0 14px;
    }
    .text{
      font-size: clamp(16px, 2.3vw, 20px);
      line-height:1.55;
      color: var(--muted);
      margin: 0 auto 18px;
      max-width: 56ch;
      white-space: pre-line;
    }

    .bigQuestion{
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      font-size: clamp(26px, 4.3vw, 44px);
      font-weight:800;
      margin: 18px 0 8px;
      color: var(--ink);
    }

    .btnRow{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 10px;
    }
    .btn{
      border:none;
      padding: 14px 18px;
      border-radius: 999px;
      font-weight: 750;
      cursor:pointer;
      background: var(--btn1);
      color: var(--btnText);
      box-shadow: 0 12px 28px rgba(216,90,122,.35);
      transition: transform .08s ease, filter .15s ease, box-shadow .15s ease;
      font-size: 16px;
      min-width: 230px;
    }
    .btn:hover{filter: brightness(1.02)}
    .btn:active{transform: translateY(1px) scale(.99)}
    .btn.alt{
      background: transparent;
      color: var(--btn2);
      border: 2px solid rgba(185,75,102,.45);
      box-shadow:none;
    }

    @media (max-width: 520px){
      .card{padding: 24px 16px}
      .btn{min-width: 100%; padding: 15px 16px}
      .btnRow{gap:10px}
    }

    .page{display:none; animation: fadeIn .35s ease;}
    .page.active{display:block;}
    @keyframes fadeIn{from{opacity:0; transform: translateY(6px)} to{opacity:1; transform:none}}

    /* Confetti (Page 5) */
    .confetti{
      position:absolute; inset:-10px; pointer-events:none; overflow:hidden;
      border-radius: var(--radius);
    }
    .confetti i{
      position:absolute;
      width:10px; height:18px;
      background: rgba(255, 215, 0, .35);
      top:-30px;
      animation: confFall linear infinite;
      border-radius: 3px;
      transform: rotate(18deg);
      filter: blur(.1px);
    }
    .confetti i.pink{background: rgba(255, 105, 135, .35)}
    .confetti i.white{background: rgba(255,255,255,.45)}
    @keyframes confFall{
      to{transform: translateY(120vh) rotate(220deg); opacity:0.2}
    }

    .small{
      font-size: 14px;
      color: rgba(107,59,69,.9);
      margin-top: 12px;
    }
    .footerHint{
      margin-top: 14px;
      font-size: 13px;
      color: rgba(107,59,69,.7);
    }
  </style>
</head>

<body>
  <div class="sparkles"></div>
  <div class="hearts" id="hearts"></div>

  <main class="wrap">
    <section class="card">

      <!-- PAGE 1 -->
      <div class="page active" id="p1">
        <div class="badge">üö® IMPORTANT QUESTION üö®</div>
        <div class="title">Read carefully.</div>
        <p class="text">
After careful review, background checks,
and absolutely no competition‚Ä¶
You have been selected.
Please remain calm.
        </p>
        <div class="btnRow">
          <button class="btn" onclick="go(2)">Continue‚Ä¶ if you dare üòè</button>
        </div>
        <div class="footerHint">Tip: Best viewed with a smile.</div>
      </div>

      <!-- PAGE 2 -->
      <div class="page" id="p2">
        <div class="badge">‚ö†Ô∏è SECURITY QUESTION ‚ö†Ô∏è</div>
        <div class="title">Before we continue‚Ä¶</div>
        <p class="text">
we need to confirm something very important.

Please answer honestly.

Do you currently like someone
who is extremely handsome, funny, caring,
wins board games way too easily,
and is just a tiny bit dramatic for entertainment purposes?
        </p>
        <div class="btnRow">
          <button class="btn" onclick="go(3)">üé≤ Yes, and he never lets me win</button>
          <button class="btn alt" onclick="go(3)">üíñ Yes, it‚Äôs obvious</button>
        </div>
      </div>

      <!-- PAGE 3 -->
      <div class="page" id="p3">
        <div class="badge">‚ú® PLOT TWIST ‚ú®</div>
        <div class="title">Plot twist‚Ä¶</div>
        <p class="text">
That person is me.

*deep breath*
*nervous boyfriend noises*
        </p>
        <div class="btnRow">
          <button class="btn" onclick="go(4)">Click here if you agree ‚úÖ</button>
        </div>
      </div>

      <!-- PAGE 4 (unchanged copy) -->
      <div class="page" id="p4">
        <div class="badge">üíå FINAL QUESTION üíå</div>
        <div class="title">For Ankita Sahai</div>
        <p class="text">
From all our laughs, chaos, inside jokes,
and the way you always make everything feel special‚Ä¶

I realized there‚Äôs no one else
I‚Äôd rather spend Valentine‚Äôs Day with.

So Miss Ankita Sahai‚Ä¶
        </p>

        <div class="bigQuestion">Will you be my Valentine? üíò</div>

        <div class="btnRow" style="margin-top:14px;">
          <button class="btn" onclick="go(45)">Yes üíï</button>
          <button class="btn alt" onclick="go(45)">Yes‚Ä¶ I was waiting for you to ask üòå</button>
        </div>

        <div class="small">P.S. Both answers are correct.</div>
      </div>

      <!-- PUZZLE PAGE (between Page 4 and Page 5) -->
      <div class="page" id="p45">
        <div class="badge">üß© BONUS GAME üß©</div>
        <div class="title">Unlock your extra reward</div>
        <p class="text">
Solve this tiny puzzle (it‚Äôs our photo üòå).
When you finish, you‚Äôll unlock a bonus on the date.
        </p>

        <div style="display:flex; justify-content:center; margin: 12px 0 6px;">
          <canvas id="puzzle" width="300" height="300"
            style="border-radius:18px; box-shadow: 0 18px 50px rgba(0,0,0,.14); background:#fff;"></canvas>
        </div>

        <div class="btnRow" style="margin-top:12px;">
          <button class="btn" onclick="shufflePuzzle()">Shuffle üîÄ</button>
          <button class="btn alt" onclick="go(4)">Back ‚Ü©Ô∏è</button>
        </div>

        <div id="puzzleMsg" class="small" style="margin-top:14px;"></div>

        <div class="btnRow" style="margin-top:12px;">
          <button id="puzzleNext" class="btn" style="display:none;" onclick="go(5)">
            Claim your reward üéÅ
          </button>
        </div>
      </div>

      <!-- PAGE 5 -->
      <div class="page" id="p5" style="position:relative;">
        <div class="confetti" aria-hidden="true" id="confetti"></div>

        <div class="badge">üéâ SUCCESS üéâ</div>
        <div class="title">BEST DECISION OF YOUR LIFE üéä</div>
        <p class="text">
Official Valentine acquired.

Mission successful.
Boyfriend extremely happy.

Preparations for:
‚ù§Ô∏è Cuddles
‚ù§Ô∏è Food
‚ù§Ô∏è Cute photos
‚ù§Ô∏è Mild chaos
‚ù§Ô∏è Excessive affection

‚Ä¶are now officially in progress üíò‚ú®
        </p>

        <div class="btnRow">
          <button class="btn" onclick="restart()">Replay (because cute) üîÅ</button>
        </div>
      </div>

    </section>
  </main>

  <script>
    // Page navigation
    function go(n){
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      const el = document.getElementById('p'+n);
      if(el) el.classList.add('active');
      if(n === 5) startConfetti();
      window.scrollTo({top:0, behavior:'smooth'});
    }
    function restart(){
      stopConfetti();
      go(1);
    }

    // ===== More floating hearts (denser background) =====
    const hearts = document.getElementById('hearts');
    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';

      const left = Math.random()*100;
      const dur = 5 + Math.random()*8;        // faster average -> more visible
      const size = 10 + Math.random()*22;     // varied sizes
      const opacity = 0.14 + Math.random()*0.30;

      h.style.left = left + 'vw';
      h.style.animationDuration = dur + 's';
      h.style.width = size + 'px';
      h.style.height = size + 'px';
      h.style.opacity = opacity.toFixed(2);

      // Slight color variance
      const tint = 160 + Math.floor(Math.random()*60); // 160-219
      h.style.background = `rgba(255, ${tint}, ${tint+10}, .22)`;
      h.style.filter = 'blur(0.2px)';

      hearts.appendChild(h);
      setTimeout(()=>h.remove(), dur*1000);
    }
    // denser spawn than before
    setInterval(spawnHeart, 420);

    // Confetti on Page 5
    let confettiOn = false;
    const conf = document.getElementById('confetti');

    function startConfetti(){
      if(confettiOn) return;
      confettiOn = true;
      conf.innerHTML = '';
      const count = 44;
      for(let i=0;i<count;i++){
        const piece = document.createElement('i');
        const left = Math.random()*100;
        const dur = 3 + Math.random()*3.5;
        const delay = Math.random()*1.6;
        const w = 6 + Math.random()*8;
        const hh = 10 + Math.random()*16;

        piece.style.left = left + '%';
        piece.style.animationDuration = dur + 's';
        piece.style.animationDelay = delay + 's';
        piece.style.width = w + 'px';
        piece.style.height = hh + 'px';
        piece.style.opacity = (0.25 + Math.random()*0.45).toFixed(2);

        const r = Math.random();
        if(r < 0.34) piece.classList.add('pink');
        else if(r < 0.67) piece.classList.add('white');

        conf.appendChild(piece);
      }
    }
    function stopConfetti(){
      confettiOn = false;
      conf.innerHTML = '';
    }

    // ================== Sliding Puzzle (3x3) ==================
    const PUZZLE_SIZE = 3;
    const canvas = document.getElementById('puzzle');
    const ctx = canvas.getContext('2d');
    const img = new Image();

    // ‚úÖ Your photo in repo root:
    img.src = 'ankita.jpeg';

    let tiles = []; // numbers 0..8, where 8 is blank
    let tileSize = canvas.width / PUZZLE_SIZE;

    function initPuzzle(){
      tiles = Array.from({length: PUZZLE_SIZE*PUZZLE_SIZE}, (_,i)=>i);
      drawPuzzle();
      setPuzzleMessage("Tap a tile next to the empty space to move it üíò", false);
      document.getElementById('puzzleNext').style.display = 'none';
    }

    function drawPuzzle(){
      if(!img.complete) return;

      ctx.clearRect(0,0,canvas.width,canvas.height);

      for(let i=0;i<tiles.length;i++){
        const val = tiles[i];
        const x = (i % PUZZLE_SIZE) * tileSize;
        const y = Math.floor(i / PUZZLE_SIZE) * tileSize;

        if(val === tiles.length - 1){
          ctx.fillStyle = 'rgba(255,255,255,0.65)';
          ctx.fillRect(x,y,tileSize,tileSize);
          continue;
        }

        const sx = (val % PUZZLE_SIZE) * (img.width / PUZZLE_SIZE);
        const sy = Math.floor(val / PUZZLE_SIZE) * (img.height / PUZZLE_SIZE);
        const sw = img.width / PUZZLE_SIZE;
        const sh = img.height / PUZZLE_SIZE;

        ctx.drawImage(img, sx, sy, sw, sh, x, y, tileSize, tileSize);

        ctx.strokeStyle = 'rgba(255,255,255,0.55)';
        ctx.lineWidth = 2;
        ctx.strokeRect(x,y,tileSize,tileSize);
      }
    }

    function isSolved(){
      for(let i=0;i<tiles.length;i++){
        if(tiles[i] !== i) return false;
      }
      return true;
    }

    function neighbors(idx){
      const x = idx % PUZZLE_SIZE;
      const y = Math.floor(idx / PUZZLE_SIZE);
      const ns = [];
      if(x>0) ns.push(idx-1);
      if(x<PUZZLE_SIZE-1) ns.push(idx+1);
      if(y>0) ns.push(idx-PUZZLE_SIZE);
      if(y<PUZZLE_SIZE-1) ns.push(idx+PUZZLE_SIZE);
      return ns;
    }

    function swap(a,b){
      const t = tiles[a];
      tiles[a] = tiles[b];
      tiles[b] = t;
    }

    canvas.addEventListener('click', (e)=>{
      const rect = canvas.getBoundingClientRect();
      const cx = e.clientX - rect.left;
      const cy = e.clientY - rect.top;

      const x = Math.floor(cx / tileSize);
      const y = Math.floor(cy / tileSize);
      const idx = y*PUZZLE_SIZE + x;

      const blankIdx = tiles.indexOf(tiles.length - 1);
      if(neighbors(idx).includes(blankIdx)){
        swap(idx, blankIdx);
        drawPuzzle();

        if(isSolved()){
          setPuzzleMessage("üéâ YOU DID IT! Bonus unlocked: You get to pick dessert AND I can‚Äôt say no üòåüç∞", true);
          document.getElementById('puzzleNext').style.display = 'inline-block';
        }
      }
    });

    function shufflePuzzle(){
      document.getElementById('puzzleNext').style.display = 'none';
      setPuzzleMessage("Shuffling‚Ä¶ üëÄ", false);

      let moves = 140;
      while(moves--){
        const blankIdx = tiles.indexOf(tiles.length - 1);
        const opts = neighbors(blankIdx);
        const pick = opts[Math.floor(Math.random()*opts.length)];
        swap(blankIdx, pick);
      }
      drawPuzzle();
      setPuzzleMessage("Okay! Solve it to unlock the bonus üíò", false);
    }

    function setPuzzleMessage(msg){
      const el = document.getElementById('puzzleMsg');
      if(!el) return;
      el.textContent = msg;
    }

    // Ensure canvas fits mobile nicely
    img.onload = () => {
      const w = Math.min(320, Math.max(260, Math.floor(window.innerWidth * 0.78)));
      canvas.width = w;
      canvas.height = w;
      tileSize = canvas.width / PUZZLE_SIZE;
      initPuzzle();
      shufflePuzzle(); // start shuffled automatically
    };
  </script>
</body>
</html>
